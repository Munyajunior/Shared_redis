# ------------------------------
# NETWORK
# ------------------------------
bind 0.0.0.0
protected-mode no
port 6379
tcp-backlog 511
timeout 0
tcp-keepalive 300

# ------------------------------
# GENERAL
# ------------------------------
daemonize no
supervised no
loglevel notice
databases 16

# ------------------------------
# MEMORY (SAFE DEFAULTS)
# ------------------------------
maxmemory 256mb
maxmemory-policy allkeys-lru

# ------------------------------
# PERSISTENCE (CHAT / STREAM SAFE)
# ------------------------------
appendonly yes
appendfsync everysec
no-appendfsync-on-rewrite yes
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Disable RDB snapshots (recommended for small memory envs)
save ""

# ------------------------------
# SECURITY
# ------------------------------
# AUTH IS PROVIDED VIA --requirepass
# DO NOT SET requirepass HERE

# ------------------------------
# PERFORMANCE
# ------------------------------
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes
